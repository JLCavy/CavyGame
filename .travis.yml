language: objective-c
osx_image: xcode6.4
script:
- xctool -workspace $APP_NAME.xcodeproj -scheme $APP_NAME -sdk iphoneos  -configuration
  Release OBJROOT=$PWD/build   SYMROOT=$PWD/build CODE_SIGN_IDENTITY="$DEVELOPER_NAME"
  ONLY_ACTIVE_ARCH=NO
before_script:
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/profile/$PROFILE_NAME.mobileprovision.enc
  -d -a -out scripts/profile/$PROFILE_NAME.mobileprovision
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/dist.cer.enc -d -a
  -out scripts/certs/dist.cer
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/dist.p12.enc -d -a
  -out scripts/certs/dist.p12
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/aps.cer.enc -d -a
  -out scripts/certs/pas.cer
- ./scripts/add-key.sh
after_success:
- ./scripts/sign-and-upload.sh
after_script:
- ./scripts/remove-key.sh
env:
  global:
  - APP_NAME="CavyGame"
  - 'DEVELOPER_NAME="iPhone Distribution: Hangzhou Cavy Technology Co., Ltd."'
  - PROFILE_NAME="cavyGameDisPro"
  - secure: Fc3yQvewFaquK5P5cHKqTd8cBlq+GOF/0EdhFiUnfWB1QbiU87ORj9pP3Qzn6HuMAxuoMUfZ3LyXPDnZ/K0DJ67HHZYGpzltdV/fEVvg0tu5TMNWwGnrVIZHtDawoLFlJtwGKHwsSlqyOpjGuLEV5aXwQ+pF4cKjsGra1Y80QzkhPqQxeuImvRma1OOMI6mauA98jplpndt2AAQKKNUZVJjVIvuDoUjCYXh9ncJcPRsbXWHjzgijkVuwBk8MTKYUMahIUsfu6+kwbnEESHnvKO/Lu11JefJIwobc5ltxanbCS5SXnouGBDcdW2TNueT2Z7rH77ieNXAeeord97TcChyddwlSHwAd6jcqcxdttreOrrM2dUs3f5QUg73BXzE8bV0DV0I9Cc5RaK+bvjEYeo5M2YCOOCPlYso2r6owShZxHSh/qEPC9S+YLggLwldDqAW8EnY0ha0GniV4hV2n6xSBWIoIctughnqrD1YhUatZwrAoio8NsdfLSvrCu1wiMboAkTnH0qmlUt5gkI11UHR73F45GTn5fzDa+x7Sq/dP0XrCe98Beo7Qu5QY82lRXvr035p0rC+lEkIW6rRJzk8Nqsq6HKAc9rU1mQSmTwJrDK8aY8p5M9OFWv+or4ljGEPwLJL75VxHpxFzE7b463W7EojYLzUCFUuRZTl7E90=
  - secure: XrqphkdXAxf36/32L8hjstsnAFGcsUg9jsCjTIBgNZD+vSUPAiqGOa79E+nOd8BhcpmGeYPVdBqPVo75BejYjr+AMSYmJtuYVsWonSXdnuHFmh8Y42efkeq1HpENJjmrV/PykuDPlxt8uYYRDPVQG9+nqJ4IBKjDEbTejXTzZptj28XkTdS9/5bgNCoSAHVvJkLz/q4STj6FuS3LfIFWQRt7Dp2kHjHIUFW/PJbMzv3Fs9AFBccxmCGYWq6Tek68myWAjDbawdHSLxit5FaG2hABUMwdHVwyd3XTP3Yhna/tGonc7FAl+8Guv2mtR6gei/fOxYkzVQjrTmLu9tzJfh0fgeOh5JZk2fH3UFAJPL1OSNEV20cp8SxZNP8+50vO8btJR99rT/viv020HosYCIddgLzOGVTDVdthwj7r7/vSg2dd/xWbgf/VuBG1qUHt6uaSYIiES2uo2lOZuMwQRjg+ixhgW6QGHHKOlf9Gdhg+PRKVvLA5pQ2jWa+N0L4X0+EVNloljVoCLm6bch1t0i99VcE9HHp4YXQoXlhxcBVomCIU8yKR4h+Q+pT/0ULohywemSZdbHdSSUxa6OI+6JER6B9EA24BsFfdeE3DJI+jMaAXt/5VIsw9EmGTaRK/QHm0dk4dGkFH97Y0Cg1Y5NLSINywQMRn0k+MSPtHpFA=
  - secure: WvPBixVl54LD7lj3ISGzxemoVaMLsu7KlFTYAGxgX2Gi+AP+bFPJdVlCiCUirbV9McDnMxn1X9qxWV1AxkHN+HOf++VdBRPfRAesxAiFvpUHqQ6Fvc6t8wni1x0AOpyotH6ierPGI40AIzYyq8qj2qdbOAo/qqmpVBs9j/mY6KUFFOIwleYRcLe4aRiXD207zI2mPUCVxNmcymw4VxsVX8tCr4vh8x/dj99R8BUz69ZwcTVJWPd4Z5PWzCIS1a7zNuDHMEy1hMTIjp5uzj0FO9AYmP/yFqYQJBpIWDmvGSw6groDccUj9HqD8x2zSTdAxXB8IJBHI4HwXNamyr7MOTutdQQbtKS0fQMdCKZPU5IXzR8QPVjrY7ejaEm+WSPpPIxxj74By4WVsU/7x3ZwX07TeSM7/h+AM6iOBx0zGdl8zFWtZQtnDIc+yxra8kDEKhwPBcQ6eOIVGWHZADWSDLGH+9hkfVlDlthknAXAFWmHuNnI0vew0WDT3t21l4wMPHgRf5nXKuqWHp/q/4/imT54rWpZTJ04bE61epDG+ZDplDfZWgsfyLpXQJEGX3AGy7pVHyQtmmoX4Ml1+A42/gEGM+MPsHdhY86o5kVziq8DdwLyBux3KOR9rUU6iW8tuovw04z67ru0vIQ/bhYWajWOZA80i5ZRK+7x/8aBtHw=
  - secure: ENkTnYqwBg2lAQHUxpgAhnFzydYFZibZT+g+IY1zWwzHZuH4AJjpdsgW4SS2o2Tg3aDmpTqE62GyDJiaJus14BhJe+raHTWpvSvxxeb4Q0Y3wL3iqlMLsjOZGfbYe1I/LHDWUWyuPnP7IYnK0BYm2Z0R3bUgVZ9WK+W8QCvvFGX/Gsw4qs7Ygf/A/2l5VcEx4JRlF5ORJLRy5K/tc7U9dAqyTgiTy8MByQQXfSw5OoDlUcddqC1QGhgtOWs1ANSJExp9S8U9KZWLLhWL/QMspggabu+wqsHq1GqYcrx5vQtHuAfKx6SkcaFjoU7nINnLS+NBdu3kEUefszmywgLXc1XGVWe9tyTSPb3oVyIfVtvo8ISKefPseG3Zbtf2ecNl6j1PRnLbDithkMY41dtdyKxTR/9BxWAqdniq8Lr7Jr6UuP62oArLCXlkGfKOsUiLwpTZDVXDB/5t/z8HUFTMzwmrOqFH/RuV5JcECFRJwBjpMIMf6nk7BE2o8q0ZI0YOeewgX2RkzdnOlGB3g++asWB/YrSlMXcWiqqBurPyHd4mtYretL66uq9uqSBKGdoby/AI9egvHZZGkjLWbAVXQNrljFF/3yJpbxHky3yCCInRcusGQC9kPojIZT+G+7A08WuCM9bni6Q0S9tL1RlhcNMtVAO1h53R4sXavJ1qTxI=
